<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        img {
            display: block;
            margin-bottom: 50px;
            width: 400px;
            height: 400px;
        }
    </style>
</head>

<body> 
    <img src="" data-src="http://192.168.18.165:8292/icons/1.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/2.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/3.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/4.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/5.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/6.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/7.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/8.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/9.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/10.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/11.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/12.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/13.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/14.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/15.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/16.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/17.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/18.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/19.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/20.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/21.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/22.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/23.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/24.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/25.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/26.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/27.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/28.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/29.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/30.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/31.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/32.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/33.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/34.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/35.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/36.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/37.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/38.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/39.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/40.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/41.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/42.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/43.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/44.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/45.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/46.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/47.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/48.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/49.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/50.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/51.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/52.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/53.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/54.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/55.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/56.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/57.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/58.png" alt="">
    <img src="" data-src="http://192.168.18.165:8292/icons/59.png" alt="">
    <script>
        (function () {
            // let _viewPortHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0),
            //     _viewPortWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);

            // function isOnVerticalViewPort(ele) {
            //     let rect = ele.getBoundingClientRect(); // 获取距离视窗的位置信息
            //     return rect.top > 0 && rect.top <= _viewPortHeight;
            // };

            // function isOnHorizontalViewPort(ele) {
            //     let rect = ele.getBoundingClientRect();
            //     return rect.left > 0 && rect.left <= _viewPortWidth;
            // };

            let num = document.getElementsByTagName('img').length; let img = document.getElementsByTagName("img"); let n = 0; //存储图片加载到的位置，避免每次都从第一张图片开始遍历 
            lazyload(); //页面载入完毕加载可是区域内的图片 
            function lazyload() { //监听页面滚动事件 
                let seeHeight = document.documentElement.clientHeight; //可见区域高度 
                let scrollTop = document.documentElement.scrollTop || document.body.scrollTop; //滚动条距离顶部高度 
                for (let i = n; i < num; i++) { // 图片未出现时距离顶部的距离大于滚动条距顶部的距离+可视区的高度 
                    if (img[i].offsetTop < seeHeight + scrollTop) {
                        if (img[i].getAttribute("src") == "") { img[i].src = img[i].getAttribute("data-src"); } n = i + 1;
                    }
                }
            }
            //采用了节流函数 
            function throttle(fun, delay, time) {
                let timeout, startTime = new Date(); return function () {
                    let context = this, args = arguments, curTime = new Date(); clearTimeout(timeout); // 如果达到了规定的触发时间间隔，触发 handler 
                    if (curTime - startTime >= time) {
                        fun.apply(context, args); startTime = curTime; // 没达到触发间隔，重新设定定时器 
                    } else { timeout = setTimeout(fun, delay); }
                };
            }; window.addEventListener('scroll', throttle(lazyload, 500, 1000));
        })
    </script>
</body>

</html>